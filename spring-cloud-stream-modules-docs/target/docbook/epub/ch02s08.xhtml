<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg"><head><title>SFTP (sftp)</title><link rel="stylesheet" type="text/css" href="docbook-epub.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/><link rel="prev" href="ch02s07.xhtml" title="RabbitMQ"/><link rel="next" href="ch02s09.xhtml" title="SYSLOG"/></head><body><header/><section class="section" title="SFTP (sftp)" epub:type="subchapter" id="spring-cloud-stream-modules-sftp"><div class="titlepage"><div><div><h2 class="title" style="clear: both">SFTP (<code class="literal">sftp</code>)</h2></div></div></div><p>This source module supports transfer of files using the SFTP protocol.
Files are transferred from the <code class="literal">remote</code> directory to the <code class="literal">local</code> directory where the module is deployed.</p><p>Messages emitted by the source are provided as a byte array by default. However, this can be
customized using the <code class="literal">--mode</code> option:</p><div class="itemizedlist" epub:type="list"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem" epub:type="list-item"><span class="strong"><strong>ref</strong></span> Provides a <code class="literal">java.io.File</code> reference</li><li class="listitem" epub:type="list-item"><span class="strong"><strong>lines</strong></span> Will split files line-by-line and emit a new message for each line</li><li class="listitem" epub:type="list-item"><span class="strong"><strong>contents</strong></span> The default. Provides the contents of a file as a byte array</li></ul></div><p>When using <code class="literal">--mode=lines</code>, you can also provide the additional option <code class="literal">--withMarkers=true</code>.
If set to <code class="literal">true</code>, the underlying <code class="literal">FileSplitter</code> will emit additional <span class="emphasis"><em>start-of-file</em></span> and <span class="emphasis"><em>end-of-file</em></span> marker messages before and after the actual data.
The payload of these 2 additional marker messages is of type <code class="literal">FileSplitter.FileMarker</code>. The option <code class="literal">withMarkers</code> defaults to <code class="literal">false</code> if not explicitly set.</p><section class="section" title="Options" epub:type="division" id="_options_8"><div class="titlepage"><div><div><h3 class="title">Options</h3></div></div></div><p>The <span class="strong"><strong>sftp</strong></span> source has the following options:</p><div class="variablelist" epub:type="list"><dl class="variablelist"><dt><span class="term">allowUnknownKeys</span></dt><dd>true to allow connecting to a host with an unknown or changed key <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">autoCreateLocalDir</span></dt><dd>if local directory must be auto created if it does not exist <span class="strong"><strong>(boolean, default: <code class="literal">true</code>)</strong></span></dd><dt><span class="term">deleteRemoteFiles</span></dt><dd>delete remote files after transfer <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">fixedDelay</span></dt><dd>fixed delay in SECONDS to poll the remote directory <span class="strong"><strong>(int, default: <code class="literal">1</code>)</strong></span></dd><dt><span class="term">host</span></dt><dd>the remote host to connect to <span class="strong"><strong>(String, default: <code class="literal">localhost</code>)</strong></span></dd><dt><span class="term">initialDelay</span></dt><dd>an initial delay when using a fixed delay trigger, expressed in TimeUnits (seconds by default) <span class="strong"><strong>(int, default: <code class="literal">0</code>)</strong></span></dd><dt><span class="term">knownHostsExpression</span></dt><dd>a SpEL expression location of known hosts file; required if 'allowUnknownKeys' is false; examples: systemProperties["user.home"]+"/.ssh/known_hosts", "/foo/bar/known_hosts" <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">localDir</span></dt><dd>set the local directory the remote files are transferred to <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">maxMessages</span></dt><dd>the maximum messages per poll; -1 for unlimited <span class="strong"><strong>(long, default: <code class="literal">-1</code>)</strong></span></dd><dt><span class="term">mode</span></dt><dd>specifies how the file is being read. By default the content of a file is provided as byte array <span class="strong"><strong>(FileReadingMode, default: <code class="literal">contents</code>, possible values: <code class="literal">ref,lines,contents</code>)</strong></span></dd><dt><span class="term">passPhrase</span></dt><dd>the passphrase to use <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">password</span></dt><dd>the password for the provided user <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">pattern</span></dt><dd>simple filename pattern to apply to the filter <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">port</span></dt><dd>the remote port to connect to <span class="strong"><strong>(int, default: <code class="literal">22</code>)</strong></span></dd><dt><span class="term">privateKey</span></dt><dd>the private key location (a valid Spring Resource URL) <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">regexPattern</span></dt><dd>filename regex pattern to apply to the filter <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">remoteDir</span></dt><dd>the remote directory to transfer the files from <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">timeUnit</span></dt><dd>the time unit for the fixed and initial delays <span class="strong"><strong>(String, default: <code class="literal">SECONDS</code>)</strong></span></dd><dt><span class="term">tmpFileSuffix</span></dt><dd>extension to use when downloading files <span class="strong"><strong>(String, default: <code class="literal">.tmp</code>)</strong></span></dd><dt><span class="term">user</span></dt><dd>the username to use <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">withMarkers</span></dt><dd>if true emits start of file/end of file marker messages before/after the data. Only valid with FileReadingMode 'lines' <span class="strong"><strong>(Boolean, no default)</strong></span></dd></dl></div></section></section><footer/></body></html>