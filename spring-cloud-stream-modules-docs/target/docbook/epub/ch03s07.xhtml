<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg"><head><title>Splitter</title><link rel="stylesheet" type="text/css" href="docbook-epub.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/><link rel="prev" href="ch03s06.xhtml" title="Transform (transform)"/><link rel="next" href="ch04.xhtml" title="Chapter 4. Sinks"/></head><body><header/><section class="section" title="Splitter" epub:type="subchapter" id="spring-cloud-stream-modules-splitter"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Splitter</h2></div></div></div><p>The splitter module builds upon the concept of the same name in Spring Integration and allows the splitting of a single
message into several distinct messages.</p><div class="variablelist" epub:type="list"><dl class="variablelist"><dt><span class="term">expression</span></dt><dd>a SpEL expression which would typically evaluate to an array or collection <span class="strong"><strong>(String, default: <code class="literal">null</code>)</strong></span></dd><dt><span class="term">delimiters</span></dt><dd>A list of delimiters to tokenize a String payload ('expression' must be null) <span class="strong"><strong>(String, default: <code class="literal">null</code>)</strong></span></dd><dt><span class="term">fileMarkers</span></dt><dd>Split File payloads, when true, START and END marker messages will be emitted, when false no markers are emitted <span class="strong"><strong>(String, default: <code class="literal">null</code>)</strong></span></dd><dt><span class="term">charset</span></dt><dd>Split File payloads using this charset to convert bytes to String <span class="strong"><strong>(String, default: <code class="literal">null</code>)</strong></span></dd><dt><span class="term">applySequence</span></dt><dd>Add correlation and sequence information to the message headers <span class="strong"><strong>(String, default: <code class="literal">true</code>)</strong></span></dd></dl></div><p>When no <code class="literal">expression</code>, <code class="literal">fileMarkers</code>, or <code class="literal">charset</code> is provided, a <code class="literal">DefaultMessageSplitter</code> is configured with (optional) <code class="literal">delimiters</code>.
When <code class="literal">fileMarkers</code> or <code class="literal">charset</code> is provided, a <code class="literal">FileSplitter</code> is configured (you must provide either a <code class="literal">fileMarkers</code>
or <code class="literal">charset</code> to split files, which must be text-based - they are split into lines).
Otherwise, an <code class="literal">ExpressionEvaluatingMessageSplitter</code> is configured.</p><p>When splitting <code class="literal">File</code> payloads, the <code class="literal">sequenceSize</code> header is zero because the size cannot be determined at the beginning.</p><p><span class="strong"><strong>Ambiguous properties are not allowed.</strong></span></p><section class="section" title="JSON Example" epub:type="division" id="_json_example"><div class="titlepage"><div><div><h3 class="title">JSON Example</h3></div></div></div><p>As part of the SpEL expression you can make use of the pre-registered JSON Path function. The syntax is
<code class="literal">#jsonPath(payload, '&lt;json path expression&gt;')</code>.</p><p>For example, consider the following JSON:</p><pre class="programlisting">{ "store": {
    "book": [
        {
            "category": "reference",
            "author": "Nigel Rees",
            "title": "Sayings of the Century",
            "price": 8.95
        },
        {
            "category": "fiction",
            "author": "Evelyn Waugh",
            "title": "Sword of Honour",
            "price": 12.99
        },
        {
            "category": "fiction",
            "author": "Herman Melville",
            "title": "Moby Dick",
            "isbn": "0-553-21311-3",
            "price": 8.99
        },
        {
            "category": "fiction",
            "author": "J. R. R. Tolkien",
            "title": "The Lord of the Rings",
            "isbn": "0-395-19395-8",
            "price": 22.99
        }
    ],
    "bicycle": {
        "color": "red",
        "price": 19.95
    }
}}</pre><p>and an expression <code class="literal">#jsonPath(payload, '$.store.book')</code>; the result will be 4 messages, each with a <code class="literal">Map</code> payload
containing the properties of a single book.</p></section></section><footer/></body></html>