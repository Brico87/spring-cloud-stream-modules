<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.&nbsp;Sources</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Cloud Stream Reference Guide"><link rel="up" href="_modules.html" title="Part&nbsp;II.&nbsp;Modules"><link rel="prev" href="_modules.html" title="Part&nbsp;II.&nbsp;Modules"><link rel="next" href="spring-cloud-stream-modules-processors.html" title="3.&nbsp;Processors"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.&nbsp;Sources</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_modules.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;II.&nbsp;Modules</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="spring-cloud-stream-modules-processors.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="sources" href="#sources"></a>2.&nbsp;Sources</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-file-source" href="#spring-cloud-stream-modules-file-source"></a>2.1&nbsp;File Source</h2></div></div></div><p>This application polls a directory and sends new files or their contents to the output channel.
The file source provides the contents of a File as a byte array by default.
However, this can be customized using the <code class="literal">--mode</code> option:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>ref</strong></span> Provides a <code class="literal">java.io.File</code> reference</li><li class="listitem"><span class="strong"><strong>lines</strong></span> Will split files line-by-line and emit a new message for each line</li><li class="listitem"><span class="strong"><strong>contents</strong></span> The default. Provides the contents of a file as a byte array</li></ul></div><p>When using <code class="literal">--mode=lines</code>, you can also provide the additional option <code class="literal">--withMarkers=true</code>.
If set to <code class="literal">true</code>, the underlying <code class="literal">FileSplitter</code> will emit additional <span class="emphasis"><em>start-of-file</em></span> and <span class="emphasis"><em>end-of-file</em></span> marker messages before and after the actual data.
The payload of these 2 additional marker messages is of type <code class="literal">FileSplitter.FileMarker</code>. The option <code class="literal">withMarkers</code> defaults to <code class="literal">false</code> if not explicitly set.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options" href="#_options"></a>2.1.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>file</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">dir</span></dt><dd>the absolute path to the directory to monitor for files <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">fixedDelay</span></dt><dd>the fixed delay polling interval specified in seconds <span class="strong"><strong>(int, default: <code class="literal">5</code>)</strong></span></dd><dt><span class="term">initialDelay</span></dt><dd>an initial delay when using a fixed delay trigger, expressed in TimeUnits (seconds by default) <span class="strong"><strong>(int, default: <code class="literal">0</code>)</strong></span></dd><dt><span class="term">maxMessages</span></dt><dd>the maximum messages per poll; -1 for unlimited <span class="strong"><strong>(long, default: <code class="literal">-1</code>)</strong></span></dd><dt><span class="term">mode</span></dt><dd>specifies how the file is being read. By default the content of a file is provided as byte array <span class="strong"><strong>(FileReadingMode, default: <code class="literal">contents</code>, possible values: <code class="literal">ref,lines,contents</code>)</strong></span></dd><dt><span class="term">pattern</span></dt><dd>a filter expression (Ant style) to accept only files that match the pattern <span class="strong"><strong>(String, default: * )</strong></span></dd><dt><span class="term">preventDuplicates</span></dt><dd>whether to prevent the same file from being processed twice <span class="strong"><strong>(boolean, default: <code class="literal">true</code>)</strong></span></dd><dt><span class="term">timeUnit</span></dt><dd>the time unit for the fixed and initial delays <span class="strong"><strong>(String, default: <code class="literal">SECONDS</code>)</strong></span></dd><dt><span class="term">withMarkers</span></dt><dd>if true emits start of file/end of file marker messages before/after the data. Only valid with FileReadingMode 'lines' <span class="strong"><strong>(Boolean, no default)</strong></span></dd></dl></div><p>The <code class="literal">ref</code> option is useful in some cases in which the file contents are large and it would be more efficient to send the file path.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-ftp-source" href="#spring-cloud-stream-modules-ftp-source"></a>2.2&nbsp;FTP Source</h2></div></div></div><p>This source application supports transfer of files using the FTP protocol.
Files are transferred from the <code class="literal">remote</code> directory to the <code class="literal">local</code> directory where the app is deployed.
Messages emitted by the source are provided as a byte array by default. However, this can be
customized using the <code class="literal">--mode</code> option:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>ref</strong></span> Provides a <code class="literal">java.io.File</code> reference</li><li class="listitem"><span class="strong"><strong>lines</strong></span> Will split files line-by-line and emit a new message for each line</li><li class="listitem"><span class="strong"><strong>contents</strong></span> The default. Provides the contents of a file as a byte array</li></ul></div><p>When using <code class="literal">--mode=lines</code>, you can also provide the additional option <code class="literal">--withMarkers=true</code>.
If set to <code class="literal">true</code>, the underlying <code class="literal">FileSplitter</code> will emit additional <span class="emphasis"><em>start-of-file</em></span> and <span class="emphasis"><em>end-of-file</em></span> marker messages before and after the actual data.
The payload of these 2 additional marker messages is of type <code class="literal">FileSplitter.FileMarker</code>. The option <code class="literal">withMarkers</code> defaults to <code class="literal">false</code> if not explicitly set.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_2" href="#_options_2"></a>2.2.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>ftp</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">autoCreateLocalDir</span></dt><dd>local directory must be auto created if it does not exist <span class="strong"><strong>(boolean, default: <code class="literal">true</code>)</strong></span></dd><dt><span class="term">clientMode</span></dt><dd>client mode to use : 2 for passive mode and 0 for active mode <span class="strong"><strong>(int, default: <code class="literal">0</code>)</strong></span></dd><dt><span class="term">deleteRemoteFiles</span></dt><dd>delete remote files after transfer <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">filenamePattern</span></dt><dd>simple filename pattern to apply to the filter <span class="strong"><strong>(String, default: *)</strong></span></dd><dt><span class="term">fixedDelay</span></dt><dd>the rate at which to poll the remote directory <span class="strong"><strong>(int, default: <code class="literal">1</code>)</strong></span></dd><dt><span class="term">host</span></dt><dd>the host name for the FTP server <span class="strong"><strong>(String, default: <code class="literal">localhost</code>)</strong></span></dd><dt><span class="term">initialDelay</span></dt><dd>an initial delay when using a fixed delay trigger, expressed in TimeUnits (seconds by default) <span class="strong"><strong>(int, default: <code class="literal">0</code>)</strong></span></dd><dt><span class="term">localDir</span></dt><dd>set the local directory the remote files are transferred to <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">maxMessages</span></dt><dd>the maximum messages per poll; -1 for unlimited <span class="strong"><strong>(long, default: <code class="literal">-1</code>)</strong></span></dd><dt><span class="term">mode</span></dt><dd>specifies how the file is being read. By default the content of a file is provided as byte array <span class="strong"><strong>(FileReadingMode, default: <code class="literal">contents</code>, possible values: <code class="literal">ref,lines,contents</code>)</strong></span></dd><dt><span class="term">password</span></dt><dd>the password for the FTP connection <span class="strong"><strong>(Password, no default)</strong></span></dd><dt><span class="term">port</span></dt><dd>the port for the FTP server <span class="strong"><strong>(int, default: <code class="literal">21</code>)</strong></span></dd><dt><span class="term">preserveTimestamp</span></dt><dd>whether to preserve the timestamp of files retrieved <span class="strong"><strong>(boolean, default: <code class="literal">true</code>)</strong></span></dd><dt><span class="term">remoteDir</span></dt><dd>the remote directory to transfer the files from <span class="strong"><strong>(String, default: <code class="literal">/</code>)</strong></span></dd><dt><span class="term">remoteFileSeparator</span></dt><dd>file separator to use on the remote side <span class="strong"><strong>(String, default: <code class="literal">/</code>)</strong></span></dd><dt><span class="term">timeUnit</span></dt><dd>the time unit for the fixed and initial delays <span class="strong"><strong>(String, default: <code class="literal">SECONDS</code>)</strong></span></dd><dt><span class="term">tmpFileSuffix</span></dt><dd>extension to use when downloading files <span class="strong"><strong>(String, default: <code class="literal">.tmp</code>)</strong></span></dd><dt><span class="term">username</span></dt><dd>the username for the FTP connection <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">withMarkers</span></dt><dd>if true emits start of file/end of file marker messages before/after the data. Only valid with FileReadingMode 'lines' <span class="strong"><strong>(Boolean, no default)</strong></span></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-http-source" href="#spring-cloud-stream-modules-http-source"></a>2.3&nbsp;Http Source</h2></div></div></div><p>A source module that listens for HTTP requests and emits the body as a message payload.
If the Content-Type matches <code class="literal">text/*</code> or <code class="literal">application/json</code>, the payload will be a String,
otherwise the payload will be a byte array.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_3" href="#_options_3"></a>2.3.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>http</strong></span> source supports the following configuration properties:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">pathPattern</span></dt><dd>An Ant-Style pattern to determine which http requests will be captured <span class="strong"><strong>(String, default: <code class="literal">/</code>)</strong></span></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-jdbc-source" href="#spring-cloud-stream-modules-jdbc-source"></a>2.4&nbsp;JDBC Source</h2></div></div></div><p>This source polls data from an RDBMS.
This source is fully based on the <code class="literal">DataSourceAutoConfiguration</code>, so refer to the
<a class="link" href="http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html" target="_top">Spring Boot JDBC Support</a> for more
information.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_4" href="#_options_4"></a>2.4.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>jdbc</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">query</span></dt><dd>the query to use to select data <span class="strong"><strong>(String, no default, required)</strong></span></dd><dt><span class="term">update</span></dt><dd>an SQL update statement to execute for marking polled messages as 'seen' <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">split</span></dt><dd>whether to split the SQL result as individual messages <span class="strong"><strong>(boolean, default: <code class="literal">true</code>)</strong></span></dd><dt><span class="term">$maxRowsPerPoll$$</span></dt><dd>max numbers of rows to process for each poll <span class="strong"><strong>(int, default: <code class="literal">0</code>)</strong></span></dd></dl></div><p>Also see the <a class="link" href="http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html" target="_top">Spring Boot Documentation</a>
for addition <code class="literal">DataSource</code> properties and <code class="literal">TriggerProperties</code> and <code class="literal">MaxMessagesProperties</code> for polling options.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jms" href="#jms"></a>2.5&nbsp;JMS</h2></div></div></div><p>The "jms" source enables receiving messages from JMS.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_5" href="#_options_5"></a>2.5.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>jms</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">spring.jms.listener.acknowledgeMode</span></dt><dd>the session acknowledge mode <span class="strong"><strong>(String, default: <code class="literal">AUTO</code>)</strong></span></dd><dt><span class="term">clientId</span></dt><dd>an identifier for the client, to be associated with a durable or shared topic subscription <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">destination</span></dt><dd>the destination name from which messages will be received <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">messageSelector</span></dt><dd>a message selector to be applied to messages <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">subscriptionDurable</span></dt><dd>when true, indicates the subscription to a topic is durable <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">subscriptionShared</span></dt><dd>when true, indicates the subscription to a topic is shared (JMS 2.0) <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">spring.jms.pubSubDomain</span></dt><dd>when true, indicates that the destination is a topic <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">subscriptionName</span></dt><dd>a name that will be assigned to the topic subscription <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">sessionTransacted</span></dt><dd>True to enable transactions and use a `DefaultMessageListenerContainer`, false to select a
`SimpleMessageListenerContainer` <span class="strong"><strong>(String, default: true)</strong></span></dd><dt><span class="term">spring.jms.listener.concurrency</span></dt><dd>The minimum number of consumer threads. *(Integer, default: 1)</dd><dt><span class="term">spring.jms.listener.maxConcurrency</span></dt><dd>The maximum number of consumer threads. Only supported when `sessionTransacted ` is true *(Integer, default: 1)</dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Spring boot broker configuration is used; refer to the
<a class="link" href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-jms" target="_top">Spring Boot Documentation</a> for more information.
The <code class="literal">spring.jms.*</code> properties above are also handled by the boot JMS support.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-load-generator" href="#spring-cloud-stream-modules-load-generator"></a>2.6&nbsp;Load Generator (<code class="literal">load-generator</code>)</h2></div></div></div><p>A source that sends generated data and dispatches it to the stream. This is to provide a method for users to identify the performance of Spring Cloud Data Flow in different environments and deployment types.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_6" href="#_options_6"></a>2.6.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>load-generator</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">messageCount</span></dt><dd>the number of messages to send <span class="strong"><strong>(Integer, default: <code class="literal">100</code>)</strong></span></dd><dt><span class="term">messageSize</span></dt><dd>the size of message to send <span class="strong"><strong>(Integer, <code class="literal">1000</code>)</strong></span></dd><dt><span class="term">producers</span></dt><dd>the number of producers <span class="strong"><strong>(Integer, <code class="literal">1</code>)</strong></span></dd><dt><span class="term">outputType</span></dt><dd>how this module should emit messages it produces <span class="strong"><strong>(MimeType, default: no default)</strong></span></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-source-rabbit" href="#spring-cloud-stream-modules-source-rabbit"></a>2.7&nbsp;RabbitMQ</h2></div></div></div><p>The "rabbit" source enables receiving messages from RabbitMQ.</p><p>The queue(s) must exist before the stream is deployed; they are not created automatically.
You can easily create a Queue using the RabbitMQ web UI.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_7" href="#_options_7"></a>2.7.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>rabbit</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">enableRetry</span></dt><dd>enable retry; when retries are exhausted the message will be rejected; message disposition will depend on dead letter configuration <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">initialRetryInterval</span></dt><dd>initial interval between retries <span class="strong"><strong>(int, default: <code class="literal">1000</code>)</strong></span></dd><dt><span class="term">mappedRequestHeaders</span></dt><dd>request message header names to be mapped from the incoming message <span class="strong"><strong>(String, default: <code class="literal">STANDARD_REQUEST_HEADERS</code>)</strong></span></dd><dt><span class="term">maxAttempts</span></dt><dd>maximum delivery attempts <span class="strong"><strong>(int, default: <code class="literal">3</code>)</strong></span></dd><dt><span class="term">maxConcurrency</span></dt><dd>the maximum number of consumers <span class="strong"><strong>(int, default: <code class="literal">1</code>)</strong></span></dd><dt><span class="term">maxRetryInterval</span></dt><dd>maximum retry interval <span class="strong"><strong>(int, default: <code class="literal">30000</code>)</strong></span></dd><dt><span class="term">queues</span></dt><dd>the queue(s) from which messages will be received <span class="strong"><strong>(String, default: no default)</strong></span></dd><dt><span class="term">requeue</span></dt><dd>whether rejected messages will be requeued by default <span class="strong"><strong>(boolean, default: <code class="literal">true</code>)</strong></span></dd><dt><span class="term">retryMultiplier</span></dt><dd>retry interval multiplier <span class="strong"><strong>(double, default: <code class="literal">2.0</code>)</strong></span></dd><dt><span class="term">transacted</span></dt><dd>true if the channel is to be transacted <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd></dl></div><p>Also see the <a class="link" href="http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html" target="_top">Spring Boot Documentation</a>
for addition properties for the broker connections and listener properties.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="rabbitSourceRetry" href="#rabbitSourceRetry"></a>2.7.2&nbsp;A Note About Retry</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>With the default <span class="emphasis"><em>ackMode</em></span> (<span class="strong"><strong>AUTO</strong></span>) and <span class="emphasis"><em>requeue</em></span> (<span class="strong"><strong>true</strong></span>) options, failed message deliveries will be retried
indefinitely.
Since there is not much processing in the rabbit source, the risk of failure in the source itself is small, unless
the downstream <code class="literal">Binder</code> is not connected for some reason.
Setting <span class="emphasis"><em>requeue</em></span> to <span class="strong"><strong>false</strong></span> will cause messages to be rejected on the first attempt (and possibly sent to a Dead Letter
Exchange/Queue if the broker is so configured).
The <span class="emphasis"><em>enableRetry</em></span> option allows configuration of retry parameters such that a failed message delivery can be retried and
eventually discarded (or dead-lettered) when retries are exhausted.
The delivery thread is suspended during the retry interval(s).
Retry options are <span class="emphasis"><em>enableRetry</em></span>, <span class="emphasis"><em>maxAttempts</em></span>, <span class="emphasis"><em>initialRetryInterval</em></span>, <span class="emphasis"><em>retryMultiplier</em></span>, and <span class="emphasis"><em>maxRetryInterval</em></span>.
Message deliveries failing with a <span class="emphasis"><em>MessageConversionException</em></span> are never retried; the assumption being that if a message
could not be converted on the first attempt, subsequent attempts will also fail.
Such messages are discarded (or dead-lettered).</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-sftp" href="#spring-cloud-stream-modules-sftp"></a>2.8&nbsp;SFTP (<code class="literal">sftp</code>)</h2></div></div></div><p>This source module supports transfer of files using the SFTP protocol.
Files are transferred from the <code class="literal">remote</code> directory to the <code class="literal">local</code> directory where the module is deployed.</p><p>Messages emitted by the source are provided as a byte array by default. However, this can be
customized using the <code class="literal">--mode</code> option:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>ref</strong></span> Provides a <code class="literal">java.io.File</code> reference</li><li class="listitem"><span class="strong"><strong>lines</strong></span> Will split files line-by-line and emit a new message for each line</li><li class="listitem"><span class="strong"><strong>contents</strong></span> The default. Provides the contents of a file as a byte array</li></ul></div><p>When using <code class="literal">--mode=lines</code>, you can also provide the additional option <code class="literal">--withMarkers=true</code>.
If set to <code class="literal">true</code>, the underlying <code class="literal">FileSplitter</code> will emit additional <span class="emphasis"><em>start-of-file</em></span> and <span class="emphasis"><em>end-of-file</em></span> marker messages before and after the actual data.
The payload of these 2 additional marker messages is of type <code class="literal">FileSplitter.FileMarker</code>. The option <code class="literal">withMarkers</code> defaults to <code class="literal">false</code> if not explicitly set.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_8" href="#_options_8"></a>2.8.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>sftp</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">allowUnknownKeys</span></dt><dd>true to allow connecting to a host with an unknown or changed key <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">autoCreateLocalDir</span></dt><dd>if local directory must be auto created if it does not exist <span class="strong"><strong>(boolean, default: <code class="literal">true</code>)</strong></span></dd><dt><span class="term">deleteRemoteFiles</span></dt><dd>delete remote files after transfer <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">fixedDelay</span></dt><dd>fixed delay in SECONDS to poll the remote directory <span class="strong"><strong>(int, default: <code class="literal">1</code>)</strong></span></dd><dt><span class="term">host</span></dt><dd>the remote host to connect to <span class="strong"><strong>(String, default: <code class="literal">localhost</code>)</strong></span></dd><dt><span class="term">initialDelay</span></dt><dd>an initial delay when using a fixed delay trigger, expressed in TimeUnits (seconds by default) <span class="strong"><strong>(int, default: <code class="literal">0</code>)</strong></span></dd><dt><span class="term">knownHostsExpression</span></dt><dd>a SpEL expression location of known hosts file; required if 'allowUnknownKeys' is false; examples: systemProperties["user.home"]+"/.ssh/known_hosts", "/foo/bar/known_hosts" <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">localDir</span></dt><dd>set the local directory the remote files are transferred to <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">maxMessages</span></dt><dd>the maximum messages per poll; -1 for unlimited <span class="strong"><strong>(long, default: <code class="literal">-1</code>)</strong></span></dd><dt><span class="term">mode</span></dt><dd>specifies how the file is being read. By default the content of a file is provided as byte array <span class="strong"><strong>(FileReadingMode, default: <code class="literal">contents</code>, possible values: <code class="literal">ref,lines,contents</code>)</strong></span></dd><dt><span class="term">passPhrase</span></dt><dd>the passphrase to use <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">password</span></dt><dd>the password for the provided user <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">pattern</span></dt><dd>simple filename pattern to apply to the filter <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">port</span></dt><dd>the remote port to connect to <span class="strong"><strong>(int, default: <code class="literal">22</code>)</strong></span></dd><dt><span class="term">privateKey</span></dt><dd>the private key location (a valid Spring Resource URL) <span class="strong"><strong>(String, default: ``)</strong></span></dd><dt><span class="term">regexPattern</span></dt><dd>filename regex pattern to apply to the filter <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">remoteDir</span></dt><dd>the remote directory to transfer the files from <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">timeUnit</span></dt><dd>the time unit for the fixed and initial delays <span class="strong"><strong>(String, default: <code class="literal">SECONDS</code>)</strong></span></dd><dt><span class="term">tmpFileSuffix</span></dt><dd>extension to use when downloading files <span class="strong"><strong>(String, default: <code class="literal">.tmp</code>)</strong></span></dd><dt><span class="term">user</span></dt><dd>the username to use <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">withMarkers</span></dt><dd>if true emits start of file/end of file marker messages before/after the data. Only valid with FileReadingMode 'lines' <span class="strong"><strong>(Boolean, no default)</strong></span></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-clound-stream-modules-source-syslog" href="#spring-clound-stream-modules-source-syslog"></a>2.9&nbsp;SYSLOG</h2></div></div></div><p>The syslog source receives SYSLOG packets over UDP, TCP, or both.
RFC3164 (BSD) and RFC5424 formats are supported.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_9" href="#_options_9"></a>2.9.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>syslog</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">protocol</span></dt><dd>`udp`, `tcp`, or `both` <span class="strong"><strong>(String, default <code class="literal">tcp</code>)</strong></span></dd><dt><span class="term">rfc</span></dt><dd>`3164` or `5424` <span class="strong"><strong>(String, default <code class="literal">3164</code>)</strong></span></dd><dt><span class="term">port</span></dt><dd>the port on which to listen  <span class="strong"><strong>(String, default <code class="literal">1514</code>)</strong></span></dd><dt><span class="term">bufferSize</span></dt><dd>the maximum size allowed (TCP) <span class="strong"><strong>(int, default <code class="literal">2048</code>)</strong></span></dd><dt><span class="term">nio</span></dt><dd>`true` to use NIO - only recommended when supporting many connections <span class="strong"><strong>(Boolean, default <code class="literal">false</code>)</strong></span></dd><dt><span class="term">reverseLookup</span></dt><dd>`true` to perform a reverse lookup on the remote IP address <span class="strong"><strong>(Boolean, default <code class="literal">false</code>)</strong></span></dd><dt><span class="term">socketTimeout</span></dt><dd>the socket timeout <span class="strong"><strong>(long, default <code class="literal">none</code>)</strong></span></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_tcp" href="#_tcp"></a>2.10&nbsp;TCP</h2></div></div></div><p>The <code class="literal">tcp</code> source acts as a server and allows a remote party to connect to Spring Cloud Data Flow and submit data over a raw tcp socket.</p><p>TCP is a streaming protocol and some mechanism is needed to frame messages on the wire. A number of decoders are
available, the default being 'CRLF' which is compatible with Telnet.</p><p>Messages produced by the TCP source module have a <code class="literal">byte[]</code> payload.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_10" href="#_options_10"></a>2.10.1&nbsp;Options</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">bufferSize</span></dt><dd>the size of the buffer (bytes) to use when decoding <span class="strong"><strong>(int, default: <code class="literal">2048</code>)</strong></span></dd><dt><span class="term">decoder</span></dt><dd>the decoder to use when receiving messages <span class="strong"><strong>(Encoding, default: <code class="literal">CRLF</code>, possible values: <code class="literal">CRLF,LF,NULL,STXETX,RAW,L1,L2,L4</code>)</strong></span></dd><dt><span class="term">nio</span></dt><dd>whether or not to use NIO <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">port</span></dt><dd>the port on which to listen <span class="strong"><strong>(int, default: <code class="literal">1234</code>)</strong></span></dd><dt><span class="term">reverseLookup</span></dt><dd>perform a reverse DNS lookup on the remote IP Address <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd><dt><span class="term">socketTimeout</span></dt><dd>the timeout (ms) before closing the socket when no data is received <span class="strong"><strong>(int, default: <code class="literal">120000</code>)</strong></span></dd><dt><span class="term">useDirectBuffers</span></dt><dd>whether or not to use direct buffers <span class="strong"><strong>(boolean, default: <code class="literal">false</code>)</strong></span></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_available_decoders" href="#_available_decoders"></a>2.10.2&nbsp;Available Decoders</h3></div></div></div><div class="variablelist"><p class="title"><b>Text Data</b></p><dl class="variablelist"><dt><span class="term">CRLF (default)</span></dt><dd>text terminated by carriage return (0x0d) followed by line feed (0x0a)</dd><dt><span class="term">LF</span></dt><dd>text terminated by line feed (0x0a)</dd><dt><span class="term">NULL</span></dt><dd>text terminated by a null byte (0x00)</dd><dt><span class="term">STXETX</span></dt><dd>text preceded by an STX (0x02) and terminated by an ETX (0x03)</dd></dl></div><div class="variablelist"><p class="title"><b>Text and Binary Data</b></p><dl class="variablelist"><dt><span class="term">RAW</span></dt><dd>no structure - the client indicates a complete message by closing the socket</dd><dt><span class="term">L1</span></dt><dd>data preceded by a one byte (unsigned) length field (supports up to 255 bytes)</dd><dt><span class="term">L2</span></dt><dd>data preceded by a two byte (unsigned) length field (up to 2<sup>16</sup>-1 bytes)</dd><dt><span class="term">L4</span></dt><dd>data preceded by a four byte (signed) length field (up to 2<sup>31</sup>-1 bytes)</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-time" href="#spring-cloud-stream-modules-time"></a>2.11&nbsp;Time (<code class="literal">time</code>)</h2></div></div></div><p>The time source will simply emit a String with the current time every so often.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_11" href="#_options_11"></a>2.11.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>time</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">fixedDelay</span></dt><dd>time delay between messages, expressed in TimeUnits (seconds by default) <span class="strong"><strong>(int, default: <code class="literal">1</code>)</strong></span></dd><dt><span class="term">dateFormat</span></dt><dd>how to render the current time, using SimpleDateFormat <span class="strong"><strong>(String, default: <code class="literal">yyyy-MM-dd HH:mm:ss</code>)</strong></span></dd><dt><span class="term">initialDelay</span></dt><dd>an initial delay when using a fixed delay trigger, expressed in TimeUnits (seconds by default) <span class="strong"><strong>(int, default: <code class="literal">0</code>)</strong></span></dd><dt><span class="term">timeUnit</span></dt><dd>the time unit for the fixed and initial delays <span class="strong"><strong>(String, default: <code class="literal">SECONDS</code>)</strong></span></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-cloud-stream-modules-twitterstream" href="#spring-cloud-stream-modules-twitterstream"></a>2.12&nbsp;Twitter Stream (<code class="literal">twitterstream</code>)</h2></div></div></div><p>This source ingests data from Twitter&#8217;s <a class="link" href="https://dev.twitter.com/docs/streaming-apis/streams/public" target="_top">streaming API v1.1</a>. It uses the <a class="link" href="https://dev.twitter.com/docs/streaming-apis/streams/public" target="_top">sample and filter</a> stream endpoints rather than the full "firehose" which needs special access. The endpoint used will depend on the parameters you supply in the stream definition (some are specific to the filter endpoint).</p><p>You need to supply all keys and secrets (both consumer and accessToken) to authenticate for this source, so it is easiest if you just add these as the following environment variables: CONSUMER_KEY, CONSUMER_SECRET, ACCESS_TOKEN and ACCESS_TOKEN_SECRET.</p><p>Stream creation is then straightforward:</p><pre class="literallayout">dataflow:&gt; stream create --name tweets --definition "twitterstream | log" --deploy</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_options_12" href="#_options_12"></a>2.12.1&nbsp;Options</h3></div></div></div><p>The <span class="strong"><strong>twitterstream</strong></span> source has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">accessToken</span></dt><dd>a valid OAuth access token <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">accessTokenSecret</span></dt><dd>an OAuth secret corresponding to the access token <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">consumerKey</span></dt><dd>a consumer key issued by twitter <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">consumerSecret</span></dt><dd>consumer secret corresponding to the consumer key <span class="strong"><strong>(String, no default)</strong></span></dd><dt><span class="term">language</span></dt><dd>language code e.g. 'en' <span class="strong"><strong>(String, default: ``)</strong></span></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p><code class="literal">twitterstream</code> emit JSON in the <a class="link" href="https://dev.twitter.com/docs/platform-objects/tweets" target="_top">native Twitter format</a>.</p></td></tr></table></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_modules.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_modules.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="spring-cloud-stream-modules-processors.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;II.&nbsp;Modules&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;3.&nbsp;Processors</td></tr></table></div></body></html>